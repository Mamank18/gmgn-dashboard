<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mamank Snipe Dashboard 1.0</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h2 { text-align: center; margin-bottom: 20px; }
    .chart-container { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px; }
    .chart-box {
      flex: 1 1 48%; background: #0e1a25; border-radius: 8px; overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    iframe { width: 100%; height: 300px; }
    .sidebar {
      position: fixed; top: 0; right: 0; height: 100%; width: 280px;
      background: #1e2a38; padding: 20px; box-shadow: -2px 0 10px rgba(0,0,0,0.5);
      transform: translateX(100%); transition: all 0.3s ease; z-index: 999;
      display: flex; flex-direction: column; gap: 10px;
    }
    .sidebar.open { transform: translateX(0); }
    .sidebar-toggle {
      position: fixed; top: 20px; right: 20px; z-index: 1000;
      background: transparent; color: #f0f0f0; padding: 6px 10px;
      border: none; border-radius: 6px; cursor: pointer; font-size: 24px;
    }
    .input-wrapper { position: relative; }
    .clear-inline-btn {
      position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
      background: transparent; border: none; color: #fff; font-size: 16px;
      cursor: pointer; padding: 0; display: none;
    }
    .sidebar input, .sidebar select, .sidebar button {
      padding: 8px; font-size: 14px; border-radius: 5px; border: none; outline: none;
      background-color: #2c3e50; color: #f0f0f0;
    }
    .sidebar input, .sidebar select { width: 100%; }
    .sidebar button { cursor: pointer; }
    #backToTop {
      position: fixed; bottom: 30px; left: 20px; z-index: 999;
      background: #1e2a38; color: #f0f0f0; border: none;
      padding: 10px 15px; border-radius: 50%; font-size: 18px;
      cursor: pointer; display: none; box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    #backToTop:hover { background: #32475b; }
    @media (max-width: 768px) { .chart-box { flex: 1 1 100%; } }
  </style>
</head>
<body>

<div style="width: 100%; overflow: hidden;">
  <img src="https://raw.githubusercontent.com/Mamank18/gmgn-dashboard/main/mamank_header.png" alt="Mamank Snipe Dashboard Header" style="width: 100%; height: auto; display: block;" />
</div>
  <!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <div class="tradingview-widget-copyright"></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
  {
  "symbols": [
    {
      "description": "",
      "proName": "INDEX:DXY"
    },
    {
      "description": "",
      "proName": "OANDA:XAUUSD"
    },
    {
      "description": "",
      "proName": "TVC:USOIL"
    },
    {
      "description": "",
      "proName": "TVC:UKOIL"
    }, 
    {
      "description": "",
      "proName": "FX_IDC:USDIDR"
    }
  ],
  "showSymbolLogo": true,
  "isTransparent": true,
  "displayMode": "regular",
  "colorTheme": "dark",
  "locale": "en"
}
  </script>
</div>
<!-- TradingView Widget END -->
 <script type="text/javascript" src="https://files.coinmarketcap.com/static/widget/coinMarquee.js"></script><div id="coinmarketcap-widget-marquee" coins="1,1027,5426,1839,74,52,2,328" currency="USD" theme="dark" transparent="true" show-symbol-logo="true"></div>
<div style="text-align: center; margin-top: 20px;">
  <button onclick="toggleCalendar()" style="
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
  ">
    <img src="https://raw.githubusercontent.com/Mamank18/gmgn-dashboard/main/economicaltv.png" 
         alt="economicaltv" 
         style="height: 40px;" 
         title="Toggle Economic Calender">
  </button>
  <div id="calendarWidget" style="display: none;">
  <div class="tradingview-widget-container" style="margin-top: 10px;">
    <div class="tradingview-widget-container__widget"></div>
    </div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
    {
      "colorTheme": "dark",
      "isTransparent": true,
      "width": "100%",
      "height": "350",
      "locale": "en",
      "importanceFilter": "0,1",
      "countryFilter": "ar,au,br,ca,cn,fr,de,in,id,it,jp,kr,mx,ru,sa,za,tr,gb,us,eu"
    }
    </script>
  </div>
</div>
<div class="sidebar" id="sidebar">
  <div class="input-wrapper">
    <button class="clear-inline-btn" id="clearBtn" onclick="clearContract()">Ã—</button>
    <input type="text" id="contractInput" placeholder="Contract Address" oninput="toggleClearButton()" />
  </div>
  <select id="chainSelect">
    <option value="sol">Solana</option>
    <option value="eth">Ethereum</option>
    <option value="blast">Blast</option>
  </select>
  <select id="themeSelect" onchange="applyTheme()">
    <option value="dark">Dark</option>
    <option value="light">Light</option>
  </select>
  <button onclick="loadDashboard()">ðŸŽ¯ Snipe</button>
</div>

<button class="sidebar-toggle" id="sidebarToggleBtn" onclick="toggleSidebar()">Â«</button>

<div class="chart-container" id="chartContainer"></div>

<div id="caBox" style="position: fixed; bottom: 20px; right: 20px; background: #1e2a38; color: #f0f0f0; padding: 8px 12px; border-radius: 6px; font-size: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.5); display: none; z-index: 1000; opacity: 0.9;">
  <button id="caDisplay" onclick="scrollToBottom()" style="background: transparent; border: none; color: inherit; cursor: pointer; font-size: 12px;"> 
    <span id="caText"></span>
  </button>
</div>

<button id="backToTop" onclick="scrollToTop()" title="Back to Top">â†‘</button>
<div id="clock" style="
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  color: #00FF00;
  font-family: 'Courier New', monospace;
  font-size: 18px;
  z-index: 9999;
  text-shadow: 0 0 4px #00ff00;">
</div>

<script>
  let currentCA = "";
function toggleCalendar() {
    const calendar = document.getElementById("calendarWidget");
    calendar.style.display = calendar.style.display === "none" ? "block" : "none";
  }
  function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("open");
  }

  document.addEventListener("click", function (e) {
    const sidebar = document.getElementById("sidebar");
    const toggleBtn = document.getElementById("sidebarToggleBtn");
    if (sidebar.classList.contains("open") && !sidebar.contains(e.target) && !toggleBtn.contains(e.target)) {
      sidebar.classList.remove("open");
    }
  });

  function loadCharts(ca, chain, theme) {
    const timeframes = ['1', '5', '15', '60'];
    const container = document.getElementById('chartContainer');
    container.innerHTML = '';
    timeframes.forEach(tf => {
      const url = `https://www.gmgn.cc/kline/${chain}/${ca}?interval=${tf}&theme=${theme}`;
      const div = document.createElement('div');
      div.className = 'chart-box';
      div.innerHTML = `<iframe src="${url}" title="Chart ${tf}min"></iframe>`;
      container.appendChild(div);
    });
  }

  async function getTokenNameSolana(ca) {
    try {
      const response = await fetch(`https://api.helius.xyz/v0/token-metadata?api-key=demo`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ mintAccounts: [ca] })
      });
      const result = await response.json();
      return result[0]?.onChainMetadata?.metadata?.name || null;
    } catch (e) {
      return null;
    }
  }

  async function loadDashboard() {
    const ca = document.getElementById('contractInput').value.trim();
    const chain = document.getElementById('chainSelect').value;
    const theme = document.getElementById('themeSelect').value;
    if (!ca) return alert('Please enter a contract address.');
    currentCA = ca;
    loadCharts(ca, chain, theme);
    document.getElementById("sidebar").classList.remove("open");
    setTimeout(() => {
      document.getElementById("chartContainer").scrollIntoView({ behavior: "smooth" });
    }, 100);

    const caBox = document.getElementById("caBox");
    const caText = document.getElementById("caText");
    let name = await getTokenNameSolana(currentCA);
    if (!name) name = getTokenNameLocal(currentCA) || shortenAddress(currentCA);
    caText.textContent = name;
    caBox.style.display = "block";
  }

  function getTokenNameLocal(ca) {
    const tokenMap = {
      "So1xxxContract123": "SolanaMonkey",
      "Eth123456789": "EtherFrog",
      "Blast987654": "BlastPump",
    };
    return tokenMap[ca] || null;
  }

  function shortenAddress(addr) {
    return addr.length > 10 ? addr.slice(0, 6) + "..." + addr.slice(-4) : addr;
  }

  function clearContract() {
    document.getElementById('contractInput').value = '';
    document.getElementById('chartContainer').innerHTML = '';
    toggleClearButton();
  }

  function toggleClearButton() {
    const input = document.getElementById('contractInput');
    const btn = document.getElementById('clearBtn');
    btn.style.display = input.value.trim() ? 'block' : 'none';
  }

  function applyTheme() {
    const theme = document.getElementById('themeSelect').value;
    if (theme === 'light') {
      document.body.style.background = '#ffffff';
      document.body.style.color = '#111';
    } else {
      document.body.style.background = '#0f2027';
      document.body.style.color = '#f0f0f0';
    }
  }

  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function scrollToBottom() {
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  }

  window.onscroll = function () {
    const btn = document.getElementById("backToTop");
    btn.style.display = window.scrollY > 200 ? "block" : "none";
  };

  function updateClock() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('en-GB', { hour12: false });
    document.getElementById('clock').textContent = timeString;
  }
  setInterval(updateClock, 1000);
  updateClock(); // initial call

</script>

</body>
</html>


